# 前端界面詳細設計規範

## 整體布局架構

### VS Code風格五區域布局

```
┌─────────────────────────────────────────────────────────────────┐
│                        Header (頂部導航)                          │
│  Logo | 系統名稱 | 導航選單 | 搜尋框 | 通知 | 用戶資訊 | 設定      │
├─────┬───────────────────────────────────────────────────────────┤
│     │                                                         │
│  A  │                                                         │
│  c  │                    Main Content                         │
│  t  │                   (主要內容區域)                          │
│  i  │                                                         │
│  v  ├─────────────────────────────────────────────────────────┤
│  i  │                                                         │
│  t  │                   Side Panel                           │
│  y  │                  (側邊面板內容)                           │
│     │                                                         │
│  B  │                                                         │
│  a  │                                                         │
│  r  │                                                         │
├─────┴───────────────────────────────────────────────────────────┤
│                     Status Bar (狀態欄)                        │
│  系統狀態 | 連線狀態 | 最後更新時間 | 版本資訊 | 快捷操作        │
└─────────────────────────────────────────────────────────────────┘
```

### 區域尺寸規範

#### 桌面端 (1920x1080 及以上)
- **Header**: 高度 64px，固定頂部
- **Activity Bar**: 寬度 60px，固定左側
- **Side Panel**: 寬度 300px，可收縮至 48px
- **Main Content**: 自適應剩餘空間，最小寬度 800px
- **Status Bar**: 高度 24px，固定底部

#### 中等桌面端 (1366x768 - 1920x1080)
- **Header**: 高度 60px，固定頂部
- **Activity Bar**: 寬度 56px，固定左側
- **Side Panel**: 寬度 280px，可收縮至 48px
- **Main Content**: 自適應剩餘空間，最小寬度 700px
- **Status Bar**: 高度 22px，固定底部

#### 小型桌面端 (1024x768 - 1366x768)
- **Header**: 高度 56px，固定頂部
- **Activity Bar**: 寬度 52px，固定左側
- **Side Panel**: 寬度 260px，可收縮至 48px
- **Main Content**: 自適應剩餘空間，最小寬度 600px
- **Status Bar**: 高度 20px，固定底部

---

## 首頁 (Dashboard) 詳細布局

### 整體結構

```
┌─────────────────────────────────────────────────────────────────┐
│                        Header                                   │
├─────┬───────────────────────────────────────────────────────────┤
│  A  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────┐ │
│  c  │  │   系統概覽卡片    │  │   代理池狀態     │  │   ETL狀態   │ │
│  t  │  │                │  │                │  │            │ │
│  i  │  └─────────────────┘  └─────────────────┘  └─────────────┘ │
│  v  │                                                         │
│  i  │  ┌─────────────────────────────────────────────────────┐ │
│  t  │  │                 實時監控圖表區域                      │ │
│  y  │  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  │ │
│     │  │  │  成功率趨勢  │  │  響應時間    │  │  地理分布    │  │ │
│  B  │  │  │            │  │            │  │            │  │ │
│  a  │  │  └─────────────┘  └─────────────┘  └─────────────┘  │ │
│  r  │  └─────────────────────────────────────────────────────┘ │
│     │                                                         │
│     │  ┌─────────────────────────────────────────────────────┐ │
│     │  │                   最近活動列表                        │ │
│     │  │  • ETL作業完成 - 2024/01/15 14:30                   │ │
│     │  │  • 新增代理源 - 2024/01/15 14:25                    │ │
│     │  │  • 系統告警解除 - 2024/01/15 14:20                  │ │
│     │  └─────────────────────────────────────────────────────┘ │
├─────┴───────────────────────────────────────────────────────────┤
│                     Status Bar                                  │
└─────────────────────────────────────────────────────────────────┘
```

### 首頁組件詳細設計

#### 1. 系統概覽卡片 (System Overview Cards)

```typescript
interface OverviewCard {
  title: string;
  value: number | string;
  trend: 'up' | 'down' | 'stable';
  trendValue: number;
  icon: React.ComponentType;
  color: 'primary' | 'success' | 'warning' | 'error';
}

const overviewCards: OverviewCard[] = [
  {
    title: '總代理數量',
    value: 15420,
    trend: 'up',
    trendValue: 5.2,
    icon: ServerIcon,
    color: 'primary'
  },
  {
    title: '可用代理',
    value: 12350,
    trend: 'stable',
    trendValue: 0.1,
    icon: CheckCircleIcon,
    color: 'success'
  },
  {
    title: '平均響應時間',
    value: '245ms',
    trend: 'down',
    trendValue: -12.3,
    icon: ClockIcon,
    color: 'warning'
  }
];
```

#### 2. 實時監控圖表區域

**成功率趨勢圖**
- 類型：線性圖表
- 時間範圍：24小時/7天/30天切換
- 數據點：每小時/每天聚合
- Y軸：成功率百分比 (0-100%)

**響應時間分布**
- 類型：柱狀圖
- 分組：<100ms, 100-500ms, 500ms-1s, 1s-3s, >3s
- 顏色編碼：綠色(快) → 紅色(慢)

**地理分布圖**
- 類型：世界地圖熱力圖
- 數據：各國代理數量
- 互動：點擊國家顯示詳細資訊

---

## 代理池管理頁面布局

### 頁面結構

```
┌─────────────────────────────────────────────────────────────────┐
│                        Header                                   │
├─────┬───────────────────────────────────────────────────────────┤
│  A  │  ┌─────────────────────────────────────────────────────┐ │
│  c  │  │                 工具列區域                            │ │
│  t  │  │  搜尋框 | 篩選器 | 排序 | 批量操作 | 新增 | 重新整理   │ │
│  i  │  └─────────────────────────────────────────────────────┘ │
│  v  │                                                         │
│  i  │  ┌─────────────────────────────────────────────────────┐ │
│  t  │  │                 代理列表表格                          │ │
│  y  │  │  ☑ IP地址      協議  匿名度  國家  響應時間  狀態     │ │
│     │  │  ☑ 192.168.1.1 HTTP  Elite   US   245ms    ●活躍   │ │
│  B  │  │  ☑ 10.0.0.1    SOCKS5 Anon   CN   156ms    ●活躍   │ │
│  a  │  │  ☑ 172.16.0.1  HTTPS  Trans  JP   892ms    ●離線   │ │
│  r  │  │  ...                                               │ │
│     │  └─────────────────────────────────────────────────────┘ │
│     │                                                         │
│     │  ┌─────────────────────────────────────────────────────┐ │
│     │  │                   分頁控制                           │ │
│     │  │    ← 上一頁  1 2 3 ... 45 46  下一頁 →  每頁50筆    │ │
│     │  └─────────────────────────────────────────────────────┘ │
├─────┴───────────────────────────────────────────────────────────┤
│                     Status Bar                                  │
└─────────────────────────────────────────────────────────────────┘
```

### 側邊面板 - 代理詳情

當點擊代理項目時，側邊面板顯示詳細資訊：

```
┌─────────────────────────────────┐
│           代理詳細資訊            │
├─────────────────────────────────┤
│  基本資訊                        │
│  • IP地址: 192.168.1.1          │
│  • 端口: 8080                   │
│  • 協議: HTTP                   │
│  • 匿名度: Elite                │
│                                │
│  地理資訊                        │
│  • 國家: 美國                   │
│  • 城市: 紐約                   │
│  • ISP: Cloudflare             │
│                                │
│  性能指標                        │
│  • 平均響應時間: 245ms          │
│  • 成功率: 98.5%               │
│  • 最後檢測: 2分鐘前            │
│                                │
│  操作按鈕                        │
│  [測試連線] [編輯] [刪除]        │
└─────────────────────────────────┘
```

---

## ETL監控頁面布局

### 頁面結構

```
┌─────────────────────────────────────────────────────────────────┐
│                        Header                                   │
├─────┬───────────────────────────────────────────────────────────┤
│  A  │  ┌─────────────────────────────────────────────────────┐ │
│  c  │  │                 ETL流程狀態                          │ │
│  t  │  │  Extract → Transform → Validate → Load             │ │
│  i  │  │    ●        ●          ●         ○                │ │
│  v  │  │   完成      完成        進行中     等待              │ │
│  i  │  └─────────────────────────────────────────────────────┘ │
│  t  │                                                         │
│  y  │  ┌─────────────────┐  ┌─────────────────────────────┐ │
│     │  │   當前作業資訊    │  │         控制面板             │ │
│  B  │  │                │  │                            │ │
│  a  │  │  作業ID: #1234  │  │  [啟動新作業] [暫停] [停止]  │ │
│  r  │  │  開始時間: 14:30 │  │  [重新啟動] [查看日誌]      │ │
│     │  │  預計完成: 15:45 │  │                            │ │
│     │  │  進度: 65%      │  │  排程設定:                  │ │
│     │  │                │  │  ○ 手動 ● 每小時 ○ 每日    │ │
│     │  └─────────────────┘  └─────────────────────────────┘ │
│     │                                                         │
│     │  ┌─────────────────────────────────────────────────────┐ │
│     │  │                 作業歷史記錄                          │ │
│     │  │  時間        狀態    處理數量  成功率  耗時  操作      │ │
│     │  │  14:30:15   完成    1,250    98.2%   15m   [詳情]   │ │
│     │  │  13:30:10   完成    1,180    97.8%   14m   [詳情]   │ │
│     │  │  12:30:05   失敗    0        0%      2m    [重試]   │ │
│     │  └─────────────────────────────────────────────────────┘ │
├─────┴───────────────────────────────────────────────────────────┤
│                     Status Bar                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## 系統設置頁面布局

### 頁面結構

```
┌─────────────────────────────────────────────────────────────────┐
│                        Header                                   │
├─────┬───────────────────────────────────────────────────────────┤
│  A  │  ┌─────────────────────────────────────────────────────┐ │
│  c  │  │                 設置分類選單                          │ │
│  t  │  │  ● 一般設置  ○ API配置  ○ 爬蟲設置  ○ 通知設置      │ │
│  i  │  └─────────────────────────────────────────────────────┘ │
│  v  │                                                         │
│  i  │  ┌─────────────────────────────────────────────────────┐ │
│  t  │  │                 設置表單區域                          │ │
│  y  │  │                                                     │ │
│     │  │  系統名稱: [JasonSpider Proxy Manager]              │ │
│  B  │  │                                                     │ │
│  a  │  │  語言設置: [繁體中文 ▼]                             │ │
│  r  │  │                                                     │ │
│     │  │  主題設置: ○ 淺色主題  ● 深色主題  ○ 自動            │ │
│     │  │                                                     │ │
│     │  │  時區設置: [Asia/Taipei ▼]                         │ │
│     │  │                                                     │ │
│     │  │  自動重新整理: ☑ 啟用  間隔: [30] 秒                │ │
│     │  │                                                     │ │
│     │  │  [儲存設置] [重設為預設值] [匯出設置] [匯入設置]      │ │
│     │  │                                                     │ │
│     │  └─────────────────────────────────────────────────────┘ │
├─────┴───────────────────────────────────────────────────────────┤
│                     Status Bar                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## 桌面端適配設計細節

### 斷點設計

```css
/* 桌面端斷點定義 */
$desktop-breakpoints: (
  'desktop-small': 1024px,
  'desktop-medium': 1366px,
  'desktop-large': 1920px,
  'desktop-xl': 2560px
);

/* 容器最大寬度 */
.container {
  max-width: 100%;
  margin: 0 auto;
  padding: 0 24px;
  
  @media (min-width: 1366px) {
    padding: 0 32px;
  }
  
  @media (min-width: 1920px) {
    max-width: 1600px;
    padding: 0 40px;
  }
  
  @media (min-width: 2560px) {
    max-width: 2000px;
    padding: 0 48px;
  }
}
```

### 桌面端組件適配行為

#### 卡片網格系統

```typescript
// 桌面端網格配置
const desktopGridConfig = {
  'desktop-small': { columns: 2, gap: 20 },
  'desktop-medium': { columns: 3, gap: 24 },
  'desktop-large': { columns: 4, gap: 28 },
  'desktop-xl': { columns: 5, gap: 32 }
};

// CSS Grid 實現
.card-grid {
  display: grid;
  gap: 20px;
  grid-template-columns: repeat(2, 1fr);
  
  @media (min-width: 1366px) {
    gap: 24px;
    grid-template-columns: repeat(3, 1fr);
  }
  
  @media (min-width: 1920px) {
    gap: 28px;
    grid-template-columns: repeat(4, 1fr);
  }
  
  @media (min-width: 2560px) {
    gap: 32px;
    grid-template-columns: repeat(5, 1fr);
  }
}
```

#### 桌面端表格優化處理

```typescript
// 桌面端表格自適應列寬
const ProxyTableDesktop: React.FC<{ proxies: ProxyNode[] }> = ({ proxies }) => {
  const [tableWidth, setTableWidth] = useState(window.innerWidth - 400); // 扣除側邊欄寬度
  
  // 根據螢幕寬度動態調整列寬
  const getColumnWidths = () => {
    if (tableWidth > 1600) {
      return { ip: '200px', protocol: '120px', country: '150px', response: '140px', status: '120px', actions: '180px' };
    } else if (tableWidth > 1200) {
      return { ip: '180px', protocol: '100px', country: '130px', response: '120px', status: '100px', actions: '160px' };
    } else {
      return { ip: '160px', protocol: '90px', country: '110px', response: '100px', status: '90px', actions: '140px' };
    }
  };
  
  return (
    <table className="proxy-table-desktop" style={{ width: '100%' }}>
      <thead>
        <tr>
          <th style={{ width: getColumnWidths().ip }}>IP地址</th>
          <th style={{ width: getColumnWidths().protocol }}>協議</th>
          <th style={{ width: getColumnWidths().country }}>國家</th>
          <th style={{ width: getColumnWidths().response }}>響應時間</th>
          <th style={{ width: getColumnWidths().status }}>狀態</th>
          <th style={{ width: getColumnWidths().actions }}>操作</th>
        </tr>
      </thead>
      <tbody>
        {proxies.map(proxy => (
          <tr key={proxy.id}>
            <td>{proxy.ip}:{proxy.port}</td>
            <td>{proxy.protocol}</td>
            <td>{proxy.country}</td>
            <td>{proxy.responseTime}ms</td>
            <td><StatusBadge status={proxy.status} /></td>
            <td>
              <button>測試</button>
              <button>編輯</button>
              <button>刪除</button>
            </td>
          </tr>
        ))}
      </tbody>
    </table>
  );
};
```

---

## 主題系統設計

### 色彩系統

```typescript
// 主題色彩定義
interface ThemeColors {
  primary: string;
  secondary: string;
  success: string;
  warning: string;
  error: string;
  info: string;
  background: {
    primary: string;
    secondary: string;
    elevated: string;
  };
  text: {
    primary: string;
    secondary: string;
    disabled: string;
  };
  border: {
    light: string;
    medium: string;
    heavy: string;
  };
}

// 淺色主題
const lightTheme: ThemeColors = {
  primary: '#1890ff',
  secondary: '#722ed1',
  success: '#52c41a',
  warning: '#faad14',
  error: '#ff4d4f',
  info: '#13c2c2',
  background: {
    primary: '#ffffff',
    secondary: '#f5f5f5',
    elevated: '#fafafa'
  },
  text: {
    primary: '#262626',
    secondary: '#595959',
    disabled: '#bfbfbf'
  },
  border: {
    light: '#f0f0f0',
    medium: '#d9d9d9',
    heavy: '#bfbfbf'
  }
};

// 深色主題
const darkTheme: ThemeColors = {
  primary: '#177ddc',
  secondary: '#642ab5',
  success: '#49aa19',
  warning: '#d89614',
  error: '#dc4446',
  info: '#13a8a8',
  background: {
    primary: '#141414',
    secondary: '#1f1f1f',
    elevated: '#262626'
  },
  text: {
    primary: '#ffffff',
    secondary: '#a6a6a6',
    disabled: '#595959'
  },
  border: {
    light: '#303030',
    medium: '#434343',
    heavy: '#595959'
  }
};
```

### VS Code風格樣式

```css
/* Activity Bar 樣式 */
.activity-bar {
  background: var(--vscode-activityBar-background);
  border-right: 1px solid var(--vscode-activityBar-border);
  
  .activity-item {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 48px;
    height: 48px;
    cursor: pointer;
    transition: background-color 0.2s;
    
    &:hover {
      background: var(--vscode-activityBar-inactiveForeground);
    }
    
    &.active {
      background: var(--vscode-activityBar-activeBorder);
      border-left: 2px solid var(--vscode-activityBar-activeBorder);
    }
  }
}

/* Side Panel 樣式 */
.side-panel {
  background: var(--vscode-sideBar-background);
  border-right: 1px solid var(--vscode-sideBar-border);
  
  .panel-header {
    padding: 8px 16px;
    background: var(--vscode-sideBarSectionHeader-background);
    border-bottom: 1px solid var(--vscode-sideBarSectionHeader-border);
    font-weight: 600;
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }
  
  .panel-content {
    padding: 8px;
  }
}

/* Status Bar 樣式 */
.status-bar {
  background: var(--vscode-statusBar-background);
  color: var(--vscode-statusBar-foreground);
  border-top: 1px solid var(--vscode-statusBar-border);
  
  .status-item {
    padding: 0 8px;
    font-size: 12px;
    cursor: pointer;
    
    &:hover {
      background: var(--vscode-statusBarItem-hoverBackground);
    }
  }
}
```

---

## 動畫與互動設計

### 過渡動畫

```css
/* 全局過渡設定 */
* {
  transition: 
    background-color 0.2s ease,
    border-color 0.2s ease,
    color 0.2s ease,
    box-shadow 0.2s ease;
}

/* 頁面切換動畫 */
.page-transition-enter {
  opacity: 0;
  transform: translateX(20px);
}

.page-transition-enter-active {
  opacity: 1;
  transform: translateX(0);
  transition: opacity 0.3s ease, transform 0.3s ease;
}

.page-transition-exit {
  opacity: 1;
  transform: translateX(0);
}

.page-transition-exit-active {
  opacity: 0;
  transform: translateX(-20px);
  transition: opacity 0.3s ease, transform 0.3s ease;
}

/* 側邊面板滑入動畫 */
.side-panel-enter {
  transform: translateX(-100%);
}

.side-panel-enter-active {
  transform: translateX(0);
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}
```

### 載入狀態設計

```typescript
// 骨架屏組件
const ProxyListSkeleton: React.FC = () => {
  return (
    <div className="skeleton-container">
      {Array.from({ length: 10 }).map((_, index) => (
        <div key={index} className="skeleton-row">
          <div className="skeleton-cell skeleton-checkbox" />
          <div className="skeleton-cell skeleton-ip" />
          <div className="skeleton-cell skeleton-protocol" />
          <div className="skeleton-cell skeleton-country" />
          <div className="skeleton-cell skeleton-status" />
        </div>
      ))}
    </div>
  );
};

// 載入動畫CSS
.skeleton-cell {
  background: linear-gradient(
    90deg,
    var(--skeleton-base) 25%,
    var(--skeleton-highlight) 50%,
    var(--skeleton-base) 75%
  );
  background-size: 200% 100%;
  animation: skeleton-loading 1.5s infinite;
}

@keyframes skeleton-loading {
  0% {
    background-position: 200% 0;
  }
  100% {
    background-position: -200% 0;
  }
}
```

---

## 無障礙設計 (Accessibility)

### 鍵盤導航

```typescript
// 鍵盤快捷鍵配置
const keyboardShortcuts = {
  'Ctrl+K': '開啟搜尋',
  'Ctrl+Shift+P': '開啟命令面板',
  'Ctrl+B': '切換側邊欄',
  'Ctrl+1': '切換到儀表板',
  'Ctrl+2': '切換到代理池',
  'Ctrl+3': '切換到ETL監控',
  'Ctrl+4': '切換到設置',
  'F5': '重新整理當前頁面',
  'Escape': '關閉模態框/面板'
};

// 焦點管理
const useFocusManagement = () => {
  const focusableElements = 'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])';
  
  const trapFocus = (container: HTMLElement) => {
    const focusableContent = container.querySelectorAll(focusableElements);
    const firstFocusableElement = focusableContent[0] as HTMLElement;
    const lastFocusableElement = focusableContent[focusableContent.length - 1] as HTMLElement;
    
    const handleTabKey = (e: KeyboardEvent) => {
      if (e.key === 'Tab') {
        if (e.shiftKey) {
          if (document.activeElement === firstFocusableElement) {
            lastFocusableElement.focus();
            e.preventDefault();
          }
        } else {
          if (document.activeElement === lastFocusableElement) {
            firstFocusableElement.focus();
            e.preventDefault();
          }
        }
      }
    };
    
    container.addEventListener('keydown', handleTabKey);
    firstFocusableElement.focus();
    
    return () => container.removeEventListener('keydown', handleTabKey);
  };
  
  return { trapFocus };
};
```

### ARIA 標籤

```typescript
// 可訪問性屬性
const AccessibleTable: React.FC<{ data: ProxyNode[] }> = ({ data }) => {
  return (
    <table 
      role="table" 
      aria-label="代理伺服器列表"
      aria-describedby="table-description"
    >
      <caption id="table-description">
        顯示 {data.length} 個代理伺服器的詳細資訊，包括IP地址、協議類型、響應時間等
      </caption>
      <thead>
        <tr role="row">
          <th role="columnheader" aria-sort="none">IP地址</th>
          <th role="columnheader" aria-sort="none">協議</th>
          <th role="columnheader" aria-sort="ascending">響應時間</th>
          <th role="columnheader" aria-sort="none">狀態</th>
        </tr>
      </thead>
      <tbody>
        {data.map((proxy, index) => (
          <tr 
            key={proxy.id} 
            role="row"
            aria-rowindex={index + 1}
            aria-selected={false}
          >
            <td role="gridcell">{proxy.ip}:{proxy.port}</td>
            <td role="gridcell">{proxy.protocol}</td>
            <td role="gridcell">
              <span aria-label={`響應時間 ${proxy.responseTime} 毫秒`}>
                {proxy.responseTime}ms
              </span>
            </td>
            <td role="gridcell">
              <StatusIndicator 
                status={proxy.status}
                aria-label={`狀態: ${proxy.status === 'active' ? '活躍' : '離線'}`}
              />
            </td>
          </tr>
        ))}
      </tbody>
    </table>
  );
};
```

---

## 性能優化細節

### 虛擬滾動實現

```typescript
// 虛擬列表組件
interface VirtualListProps<T> {
  items: T[];
  itemHeight: number;
  containerHeight: number;
  renderItem: (item: T, index: number) => React.ReactNode;
  overscan?: number;
}

const VirtualList = <T,>({
  items,
  itemHeight,
  containerHeight,
  renderItem,
  overscan = 5
}: VirtualListProps<T>) => {
  const [scrollTop, setScrollTop] = useState(0);
  
  const startIndex = Math.max(0, Math.floor(scrollTop / itemHeight) - overscan);
  const endIndex = Math.min(
    items.length - 1,
    Math.ceil((scrollTop + containerHeight) / itemHeight) + overscan
  );
  
  const visibleItems = items.slice(startIndex, endIndex + 1);
  const totalHeight = items.length * itemHeight;
  const offsetY = startIndex * itemHeight;
  
  return (
    <div 
      style={{ height: containerHeight, overflow: 'auto' }}
      onScroll={(e) => setScrollTop(e.currentTarget.scrollTop)}
    >
      <div style={{ height: totalHeight, position: 'relative' }}>
        <div style={{ transform: `translateY(${offsetY}px)` }}>
          {visibleItems.map((item, index) => (
            <div key={startIndex + index} style={{ height: itemHeight }}>
              {renderItem(item, startIndex + index)}
            </div>
          ))}
        </div>
      </div>
    </div>
  );
};
```

### 圖表性能優化

```typescript
// 數據採樣和聚合
const useChartData = (rawData: DataPoint[], maxPoints: number = 100) => {
  return useMemo(() => {
    if (rawData.length <= maxPoints) {
      return rawData;
    }
    
    const step = Math.ceil(rawData.length / maxPoints);
    const sampledData: DataPoint[] = [];
    
    for (let i = 0; i < rawData.length; i += step) {
      const chunk = rawData.slice(i, i + step);
      const aggregated = {
        timestamp: chunk[0].timestamp,
        value: chunk.reduce((sum, point) => sum + point.value, 0) / chunk.length
      };
      sampledData.push(aggregated);
    }
    
    return sampledData;
  }, [rawData, maxPoints]);
};

// Canvas 渲染優化
const HighPerformanceChart: React.FC<{ data: DataPoint[] }> = ({ data }) => {
  const canvasRef = useRef<HTMLCanvasElement>(null);
  
  useEffect(() => {
    const canvas = canvasRef.current;
    if (!canvas) return;
    
    const ctx = canvas.getContext('2d');
    if (!ctx) return;
    
    // 使用 requestAnimationFrame 進行批量渲染
    const render = () => {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      
      // 批量繪製數據點
      ctx.beginPath();
      data.forEach((point, index) => {
        const x = (index / (data.length - 1)) * canvas.width;
        const y = canvas.height - (point.value / 100) * canvas.height;
        
        if (index === 0) {
          ctx.moveTo(x, y);
        } else {
          ctx.lineTo(x, y);
        }
      });
      ctx.stroke();
    };
    
    requestAnimationFrame(render);
  }, [data]);
  
  return <canvas ref={canvasRef} width={800} height={400} />;
};
```

這份詳細的前端界面設計規範涵蓋了所有主要頁面的布局細節、響應式設計、主題系統、動畫效果、無障礙設計和性能優化策略，為前端開發團隊提供了完整的實施指南。