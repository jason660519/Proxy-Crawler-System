# 專案目錄結構及功能概述

## 整體目錄結構

```text
JasonSpider/
├── .github/                            # GitHub 相關配置
│   ├── workflows/                      # CI/CD 工作流
│   │   ├── ci.yml                      # 持續整合配置
│   │   └── cd.yml                      # 持續部署配置
│   └── ISSUE_TEMPLATE/                 # Issue 模板
├── docker/                             # Docker 配置目錄
│   ├── html-to-markdown/               # HTML to Markdown 服務配置
│   ├── proxy-manager/                  # 代理管理器配置
│   ├── nginx/                          # Nginx 反向代理配置
│   └── prometheus/                     # 監控系統配置
├── docs/                               # 項目文檔
│   ├── PROJECT_OVERVIEW.md             # 項目總覽
│   ├── 架構設計總覽.md                  # 架構設計文檔
│   ├── API_REFERENCE.md                # API 參考文檔
│   ├── DEPLOYMENT_GUIDE.md             # 部署指南
│   └── DEVELOPMENT_GUIDE.md            # 開發指南
├── frontend/                           # 前端項目 (React + TypeScript)
│   ├── public/                         # 靜態資源
│   ├── src/                            # 源代碼
│   │   ├── components/                 # React 組件
│   │   │   ├── layout/                 # 佈局組件
│   │   │   ├── proxy/                  # 代理相關組件
│   │   │   ├── monitoring/             # 監控組件
│   │   │   └── common/                 # 通用組件
│   │   ├── pages/                      # 頁面組件
│   │   ├── stores/                     # 狀態管理 (Zustand)
│   │   ├── services/                   # API 服務
│   │   ├── hooks/                      # 自定義 Hooks
│   │   ├── utils/                      # 工具函數
│   │   └── types/                      # TypeScript 類型定義
│   ├── package.json                    # 依賴配置
│   ├── vite.config.ts                  # Vite 配置
│   └── tsconfig.json                   # TypeScript 配置
├── src/                                # 後端源代碼 (Python)
│   ├── __init__.py                     # 包初始化
│   ├── main.py                         # FastAPI 應用入口
│   ├── api/                            # API 路由層
│   │   ├── v1/                         # API 版本1
│   │   │   ├── __init__.py
│   │   │   ├── proxy.py                # 代理相關API
│   │   │   ├── convert.py              # 轉換API
│   │   │   └── monitor.py              # 監控API
│   │   └── __init__.py
│   ├── core/                           # 核心業務邏輯
│   │   ├── __init__.py
│   │   ├── config/                     # 配置管理
│   │   │   ├── __init__.py
│   │   │   ├── settings.py             # 應用設置
│   │   │   ├── development.py          # 開發環境配置
│   │   │   ├── production.py           # 生產環境配置
│   │   │   └── testing.py              # 測試環境配置
│   │   ├── crawlers/                   # 爬蟲模組
│   │   │   ├── __init__.py
│   │   │   ├── base.py                 # 基礎爬蟲類
│   │   │   ├── sslproxies_org.py       # sslproxies.org 爬蟲
│   │   │   ├── geonode_com.py          # geonode.com 爬蟲
│   │   │   └── github_proxies.py       # GitHub 代理爬蟲
│   │   ├── proxy_manager/              # 代理管理模組
│   │   │   ├── __init__.py
│   │   │   ├── manager.py              # 代理管理器
│   │   │   ├── validator.py            # 代理驗證器
│   │   │   ├── pool.py                 # 代理池管理
│   │   │   └── scoring.py              # 智能評分系統
│   │   ├── anti_detection/             # 反檢測引擎
│   │   │   ├── __init__.py
│   │   │   ├── user_agent.py           # UA 管理器
│   │   │   ├── tls_fingerprint.py      # TLS 指紋模擬
│   │   │   └── request_pattern.py      # 請求模式隨機化
│   │   ├── data_processing/            # 數據處理模組
│   │   │   ├── __init__.py
│   │   │   ├── etl.py                  # ETL 流程引擎
│   │   │   ├── validation.py           # 數據驗證
│   │   │   └── storage.py              # 數據存儲
│   │   └── services/                   # 服務層
│   │       ├── __init__.py
│   │       ├── fetch_service.py        # 抓取服務
│   │       ├── validation_service.py   # 驗證服務
│   │       └── persistence_service.py  # 持久化服務
│   ├── html_to_markdown/               # HTML to Markdown 轉換模組
│   │   ├── __init__.py
│   │   ├── core.py                     # 核心轉換邏輯
│   │   ├── converters.py               # 多引擎轉換器
│   │   ├── cleaners.py                 # 內容清理引擎
│   │   ├── extractors.py               # 智能內容提取
│   │   └── quality.py                  # 質量保證
│   ├── infrastructure/                 # 基礎設施層
│   │   ├── __init__.py
│   │   ├── database/                   # 數據庫層
│   │   │   ├── __init__.py
│   │   │   ├── postgres.py             # PostgreSQL 連接
│   │   │   ├── redis.py                # Redis 連接
│   │   │   └── models.py               # 數據模型
│   │   ├── network/                    # 網絡層
│   │   │   ├── __init__.py
│   │   │   ├── http_client.py          # HTTP 客戶端管理
│   │   │   ├── connection_pool.py      # 連接池管理
│   │   │   └── proxy_rotation.py       # 代理輪換機制
│   │   ├── logging/                    # 日誌系統
│   │   │   ├── __init__.py
│   │   │   ├── config.py               # 日誌配置
│   │   │   ├── middleware.py           # 日誌中間件
│   │   │   └── handlers.py             # 日誌處理器
│   │   └── monitoring/                 # 監控系統
│   │       ├── __init__.py
│   │       ├── metrics.py              # 性能指標
│   │       ├── health.py               # 健康檢查
│   │       └── alerts.py               # 告警系統
│   ├── utils/                          # 工具函數
│   │   ├── __init__.py
│   │   ├── helpers.py                  # 通用輔助函數
│   │   ├── formatters.py               # 數據格式化
│   │   ├── validators.py               # 數據驗證器
│   │   └── constants.py                # 常量定義
│   └── tests/                          # 測試目錄
│       ├── __init__.py
│       ├── conftest.py                 # pytest 配置
│       ├── unit/                       # 單元測試
│       ├── integration/                # 集成測試
│       └── e2e/                        # 端到端測試
├── data/                               # 數據目錄
│   ├── raw/                            # 原始數據
│   ├── processed/                      # 處理後的數據
│   ├── proxy_manager/                  # 代理管理數據
│   └── transformed/                    # 轉換後的數據
├── scripts/                            # 腳本目錄
│   ├── deployment/                     # 部署腳本
│   ├── monitoring/                     # 監控腳本
│   └── maintenance/                    # 維護腳本
├── config/                             # 配置文件目錄
│   ├── crawler/                        # 爬蟲配置
│   ├── validation/                     # 驗證規則
│   ├── output/                         # 輸出格式配置
│   └── security/                       # 安全配置
├── .env.example                        # 環境變量示例
├── .env                                # 環境變量配置
├── requirements.txt                    # Python 依賴
├── requirements-dev.txt                # 開發環境依賴
├── pyproject.toml                      # 項目配置
├── Dockerfile                          # Docker 構建文件
├── docker-compose.yml                  # Docker Compose 配置
├── Makefile                            # 項目構建命令
└── README.md                           # 項目說明
```

## 主要目錄功能詳解

### 1. 後端核心（`src/`）

#### API 層（`src/api/`）

- 功能：處理 HTTP 請求響應，路由分發
- 重要文件：
  - `proxy.py`：代理相關的 RESTful API 端點
  - `convert.py`：HTML 轉 Markdown API
  - `monitor.py`：系統監控 API

#### 核心業務層（`src/core/`）

- 功能：包含所有核心業務邏輯模組
- 子模組：
  - `config/`：多環境配置管理
  - `crawlers/`：各網站爬蟲實現
  - `proxy_manager/`：代理池管理和驗證
  - `anti_detection/`：反檢測技術實現
  - `data_processing/`：數據處理和轉換
  - `services/`：服務層抽象（抓取、驗證、持久化）

#### HTML 轉換模組（`src/html_to_markdown/`）

- 功能：多引擎 HTML 到 Markdown 轉換
- 核心組件：
  - `converters.py`：支援 markdownify、html2text 等引擎
  - `cleaners.py`：內容清理和優化
  - `extractors.py`：智能內容提取
  - `quality.py`：轉換質量驗證

#### 基礎設施層（`src/infrastructure/`）

- 功能：提供數據庫、網絡、日誌等基礎服務
- 子模組：
  - `database/`：PostgreSQL 和 Redis 連接管理
  - `network/`：異步 HTTP 客戶端和代理輪換
  - `logging/`：結構化日誌系統
  - `monitoring/`：性能監控和告警

### 2. 前端項目（`frontend/`）

#### 組件結構（`frontend/src/components/`）

- `layout/`：應用佈局（側邊欄、頭部、底部）
- `proxy/`：代理管理相關組件
- `monitoring/`：監控儀表板組件
- `common/`：通用 UI 組件

#### 狀態管理（`frontend/src/stores/`）

- 功能：使用 Zustand 進行輕量級狀態管理
- 包含：代理狀態、用戶設置、應用狀態等

#### 服務層（`frontend/src/services/`）

- 功能：封裝與後端 API 的通信
- 包含：HTTP 請求封裝、錯誤處理、數據轉換

### 3. 配置管理（`config/`）

#### 爬蟲配置（`config/crawler/`）

- 功能：各網站爬蟲的請求參數、重試策略、頻率限制
- 格式：YAML 配置文件，支持熱重載

#### 驗證規則（`config/validation/`）

- 功能：代理驗證規則、數據質量規則
- 包含：連通性檢查規則、匿名性驗證規則

### 4. 數據目錄（`data/`）

- 數據分層：
  - `raw/`：原始爬取數據，保持原樣
  - `processed/`：初步處理後的數據
  - `transformed/`：最終轉換格式的數據
  - `proxy_manager/`：代理池狀態數據

### 5. 基礎設施配置（`docker/`, `scripts/`）

#### Docker 配置（`docker/`）

- 多服務配置：分離的 Dockerfile 和配置
- 包含：主應用、數據庫、監控、反向代理

#### 腳本目錄（`scripts/`）

- 自動化腳本：部署、監控、維護腳本
- 分類：按功能分類存放

## 模組化設計特點

1. 分層架構
   - API 層：純粹的請求響應處理
   - 服務層：業務邏輯抽象和組合
   - 數據訪問層：數據庫操作封裝
   - 基礎設施層：技術細節實現

2. 模組獨立性
   - 每個爬蟲都是獨立模組，易於擴展
   - 代理管理與爬蟲邏輯分離
   - 數據處理流程模組化

3. 配置驅動
   - 通過配置文件控制行為
   - 支持多環境配置
   - 熱重載支持

4. 測試覆蓋
   - 分層測試策略（單元、集成、E2E）
   - 測試工具和配置集中管理

## 開發規範

1. 代碼組織
   - 按功能模組分目錄
   - 單一職責原則
   - 清晰的導入導出關係

2. 命名約定
   - Python：`snake_case`
   - JavaScript/TypeScript：`camelCase`
   - 配置文件：`kebab-case`
   - 測試文件：`test_*.py` 或 `*.spec.ts`

3. 文檔要求
   - 每個模組都有 README
   - 重要的函數和類有文檔字符串
   - API 端點有 OpenAPI 文檔

## 服務層抽象映射

- `FetchService`：外部資源/頁面抓取、Proxy 取得、HTML 抽取
- `ValidationService`：Proxy 驗證、品質評分、合規/指標判定
- `PersistenceService`：代理狀態與結果入庫、指標/統計存儲
